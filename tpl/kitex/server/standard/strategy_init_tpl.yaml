path: strategy_init.go
update_behavior:
  type: cover
body: |-
  package main

  import (
    "fmt"

    "{{.Module}}/biz/strategy/{{SnakeString .ServiceName}}_strategy"
  )

  func initStrategies() error {
    // Load per-service strategy config.
    cfg, found, err := {{SnakeString $.ServiceName}}_strategy.LoadStrategyConfig()
    if err != nil {
      return fmt.Errorf("load {{SnakeString $.ServiceName}} strategy config: %w", err)
    }
    _ = found // found=false means no strategy file; will fallback to default.

    // Initialize strategies for each method.
    {{- range .Methods }}
    if err := {{SnakeString $.ServiceName}}_strategy.Init{{.Name}}Strategies(cfg); err != nil {
      return fmt.Errorf("init {{SnakeString .Name}} strategies: %w", err)
    }
    {{- end }}
    return nil
  }
